---
import UpdateSquare from "../../components/UpdateSquare.astro";
import AppLayout from "../../layouts/AppLayout.astro";
import { supabase } from "../../lib/supabase";

const { data, error } = await supabase
  .from("updates")
  .select("*, projects(*, users(*))");
if (error) throw error;
console.log({ data });
// TODO: Handle empty return

const numberOfUpdates = new Array(14).fill(null);
---

<AppLayout title="Updates">
  <div>
    <div class="bg-springBud px-page py-10">
      <h1
        class="font-mono text-[125px] leading-[0.9] text-black tracking-tight"
      >
        Updates
      </h1>
      <ul class="flex items-center">
        {
          numberOfUpdates.map((update, index: number) => (
            <li>
              <UpdateSquare number={index + 1} url={`/update/${index + 1}`} />
            </li>
          ))
        }
      </ul>
    </div>
    {JSON.stringify(data)}
  </div>

  <!-- PROJECT DETAILS -->
  <div></div>

  <!-- UPDATES -->
</AppLayout>
